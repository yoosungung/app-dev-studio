/**
 * @param vue
 * @returns
 */
function DropOutViewService(vue) {
    /**
    * 목록 조회
    */
    this.readList = function() {
        CommonUtil.axios()
        .post("readList", vue.search)
        .then(function(response) {
            var data = response.data;

             //grid variables
            var tableColumnList = [];
            var tableDataList = [];
            var tableData = {};

            tableColumnList = [{header: "이름", name: "ipsyName", align: "center", width: "300", sortable: true },
                {header: "학번", name: "ipsyHakbun", align: "center", width: "300", sortable: true}];

            for(let i=0; i<data.length; i++) {
                tableDataList.push({"ipsyName": data[i].ipsyName, "ipsyHakbun": data[i].ipsyHakbun});
            }

            const Grid = tui.Grid
            $("#grid").html("");
            var grid = new Grid({
                el: document.getElementById('grid'),
                columnOptions: {minWidth: 100, resizable: true},
                columns: tableColumnList,
                data: tableDataList,
                bodyHeight: 700,
                theme: 'striped'
            });

            grid.on("click", function(event) {
                readStudent(grid.getRow(event.rowKey).ipsyHakbun);
            });
        })
        ["catch"](function(error) {
            CommonUtil.showAxiosError(error);
        });
    };
}

/**
 * 학생 조회
 */
var readStudent = function(hakbun) {
    CommonUtil.axios()
    .get("readStudent/" + hakbun)
    .then(function(response) {
        if (response != null) {
            vues.list.student = response.data;
            console.log(response.data);
        }
    })
    ["catch"](function(error) {
        CommonUtil.showAxiosError(error);
    });
};

