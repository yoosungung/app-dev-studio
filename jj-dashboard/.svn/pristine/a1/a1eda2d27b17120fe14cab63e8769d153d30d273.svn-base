<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
중도탈락 Mapper
 -->
<mapper namespace="kr.ac.jj.dashboard.application.dashboard.dropout.mapper.DropOutMapper">

    <!-- 중도탈락 학생 목록 조회 -->
    <select id="readList" resultType="kr.ac.jj.shared.infrastructure.framework.core.support.collection.CamelKeyMap">
        <![CDATA[
            SELECT
                   IPSY_NAME
                 , IPSY_HAKBUN
            FROM   DW_DROPOUT
            WHERE  IPSY_HAPGYUK_YN = 'Y'
        ]]>
        <if test='search.ipsyYy != null and search.ipsyYy != ""'>
            <![CDATA[
                AND IPSY_YY = #{search.ipsyYy}
            ]]>
        </if>
        <if test='search.ipsyName != null and search.ipsyName != ""'>
            <![CDATA[
                AND    UPPER(IPSY_NAME) LIKE CONCAT_WS('', '%', UPPER(#{search.ipsyName}), '%')
            ]]>
        </if>
        <if test='search.ipsyHakbun != null and search.ipsyHakbun != ""'>
            <![CDATA[
                AND    UPPER(IPSY_HAKBUN) LIKE CONCAT_WS('', '%', UPPER(#{search.ipsyHakbun}), '%')
            ]]>
        </if>
    </select>

    <!-- 중도탈락 학생 조회 -->
    <select id="readStudent" resultType="kr.ac.jj.shared.infrastructure.framework.core.support.collection.CamelKeyMap">
        <![CDATA[
            SELECT * FROM
            DW_DROPOUT
            WHERE
            IPSY_HAKBUN = #{hakbun}
        ]]>
    </select>
</mapper>
